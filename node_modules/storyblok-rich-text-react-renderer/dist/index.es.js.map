{"version":3,"file":"index.es.js","sources":["../src/index.js"],"sourcesContent":["import React from 'react';\n\nexport const NODE_HEADING = 'heading';\nexport const NODE_CODEBLOCK = 'code_block';\nexport const NODE_PARAGRAPH = 'paragraph';\nexport const NODE_QUOTE = 'blockquote';\nexport const NODE_OL = 'ordered_list';\nexport const NODE_UL = 'bullet_list';\nexport const NODE_LI = 'list_item';\nexport const NODE_HR = 'horizontal_rule';\nexport const NODE_BR = 'hard_break';\nexport const NODE_IMAGE = 'image';\n\nexport const MARK_BOLD = 'bold';\nexport const MARK_ITALIC = 'italic';\nexport const MARK_STRIKE = 'strike';\nexport const MARK_UNDERLINE = 'underline';\nexport const MARK_CODE = 'code';\nexport const MARK_LINK = 'link';\nexport const MARK_STYLED = 'styled';\n\nexport function render(document, options = {}) {\n    if (\n        typeof document === 'object' &&\n        document.type === 'doc' &&\n        Array.isArray(document.content)\n    ) {\n        const {\n            blokResolvers = {},\n            defaultBlokResolver = () => null,\n            nodeResolvers: customNodeResolvers = {},\n            markResolvers: customMarkResolvers = {},\n            textResolver = str => str,\n        } = options;\n\n        const nodeResolvers = {\n            ...defaultNodeResolvers,\n            ...customNodeResolvers,\n        };\n\n        const markResolvers = {\n            ...defaultMarkResolvers,\n            ...customMarkResolvers,\n        };\n\n        let currentKey = 0;\n\n        const addKey = element =>\n            React.isValidElement(element)\n                ? React.cloneElement(element, { key: currentKey++ })\n                : element;\n\n        const renderNodes = nodes => {\n            const elements = nodes\n                ? nodes.map(renderNode).filter(node => node != null)\n                : null;\n            return Array.isArray(elements) && elements.length === 0\n                ? null\n                : elements;\n        };\n\n        const renderNode = node => {\n            if (node.type === 'blok') {\n                const { body } = node.attrs;\n                return body.map(({ component, ...props }) => {\n                    const resolver = blokResolvers[component];\n                    const element = resolver\n                        ? resolver(props)\n                        : defaultBlokResolver(component, props);\n                    return addKey(element);\n                });\n            } else {\n                let childNode;\n                if (node.type === 'text') {\n                    childNode = textResolver(node.text);\n                } else {\n                    const resolver = nodeResolvers[node.type];\n                    childNode = resolver\n                        ? addKey(resolver(renderNodes(node.content), node.attrs))\n                        : null;\n                }\n                const marks = node.marks ?? [];\n                return marks.reduceRight((children, mark) => {\n                    const resolver = markResolvers[mark.type];\n                    return resolver\n                        ? addKey(resolver(children, mark.attrs))\n                        : children;\n                }, childNode);\n            }\n        };\n\n        return renderNodes(document.content);\n    } else if (typeof document === 'string') {\n        const {\n          defaultStringResolver = (str) => str,\n          textResolver = (str) => str,\n        } = options;\n        return defaultStringResolver(textResolver(document));\n    }\n    return null;\n}\n\nconst simpleNodeResolver = element => children =>\n    children != null ? React.createElement(element, null, children) : null;\n\nconst emptyNodeResolver = element => () =>\n    React.createElement(element);\n\nconst headingNodeResolver = (children, props) =>\n    React.createElement(`h${props.level}`, null, children);\n\nconst imageNodeResolver = (children, props) =>\n    React.createElement('img', props, children);\n\nconst codeblockNodeResolver = (children, props) => {\n    const codeProps = { className: props.class };\n    const code = React.createElement('code', codeProps, children);\n    return React.createElement('pre', null, code);\n};\n\nconst simpleMarkResolver = element => children =>\n    React.createElement(element, null, children);\n\nconst linkMarkResolver = (children, { linktype, href, target }) => {\n    const props = {\n        href: linktype === 'email' ? `mailto:${href}` : href,\n        target,\n    };\n    return React.createElement('a', props, children);\n};\n\nconst styledMarkResolver = (children, props) =>\n    React.createElement('span', { className: props.class }, children);\n\nconst defaultNodeResolvers = {\n    [NODE_HEADING]: headingNodeResolver,\n    [NODE_CODEBLOCK]: codeblockNodeResolver,\n    [NODE_IMAGE]: imageNodeResolver,\n    [NODE_PARAGRAPH]: simpleNodeResolver('p'),\n    [NODE_QUOTE]: simpleNodeResolver('blockquote'),\n    [NODE_OL]: simpleNodeResolver('ol'),\n    [NODE_UL]: simpleNodeResolver('ul'),\n    [NODE_LI]: simpleNodeResolver('li'),\n    [NODE_HR]: emptyNodeResolver('hr'),\n    [NODE_BR]: emptyNodeResolver('br'),\n};\n\nconst defaultMarkResolvers = {\n    [MARK_LINK]: linkMarkResolver,\n    [MARK_STYLED]: styledMarkResolver,\n    [MARK_BOLD]: simpleMarkResolver('b'),\n    [MARK_ITALIC]: simpleMarkResolver('i'),\n    [MARK_STRIKE]: simpleMarkResolver('s'),\n    [MARK_UNDERLINE]: simpleMarkResolver('u'),\n    [MARK_CODE]: simpleMarkResolver('code'),\n};\n"],"names":["NODE_HEADING","NODE_CODEBLOCK","NODE_PARAGRAPH","NODE_QUOTE","NODE_OL","NODE_UL","NODE_LI","NODE_HR","NODE_BR","NODE_IMAGE","MARK_BOLD","MARK_ITALIC","MARK_STRIKE","MARK_UNDERLINE","MARK_CODE","MARK_LINK","MARK_STYLED","render","document","options","type","Array","isArray","content","blokResolvers","defaultBlokResolver","nodeResolvers","customNodeResolvers","markResolvers","customMarkResolvers","textResolver","str","_objectSpread","defaultNodeResolvers","defaultMarkResolvers","currentKey","addKey","element","React","isValidElement","cloneElement","key","renderNodes","nodes","elements","map","renderNode","filter","node","length","body","attrs","component","props","resolver","childNode","text","marks","reduceRight","children","mark","defaultStringResolver","simpleNodeResolver","createElement","emptyNodeResolver","headingNodeResolver","level","imageNodeResolver","codeblockNodeResolver","codeProps","className","class","code","simpleMarkResolver","linkMarkResolver","linktype","href","target","styledMarkResolver"],"mappings":"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"}